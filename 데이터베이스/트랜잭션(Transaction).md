## 트랜잭션(Transaction)

- 트랜잭션이란?
  데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위 또는 한꺼번에 모두 수행되어야 할 일련의 연산을 의미
- 특징
  1. 트랜잭션은 DB시스템에서 병행 제어 및 회복 작업 시 처리되는 작업의 논리적 단위
  2. 사용자가 시스템에 대한 서비스 요구 시 시스템이 응답하기 위한 상태 변환과정의 작업단위
  3. 하나의 트랜잭션은 Commit되거나 Rollback된다

#### 트랜잭션 성질(ACID)

- Atomicity(원자성)
  1. 트랜젹션의 연산은 DB에 모두 반영되거나 모두 반영되지 않아야 한다
  2. 트래재션 내의 모든 명령은 반드시 완벽히 수행되어야 하며, 어느하나라도 오류가 발생하면 전부 취소되어야 한다
- Consistency(일관성)
  1. 트랜잭션이 그 실행을 성공적으로 완료하면 언제나 일관성 있는 DB상태로 변환한다
  2. 시스템이 가지고 있는 고정요소(공유자원)는 트랜잭션 수행 전과 트랜잭션 수행 후의 상태가 같아야 한다
- Isolation(고립성)
  1. 둘 이상의 트랜잭션이 동시에 병행되어 실행될 때 어느 한 트랜잭션 실행 중 다른 트랜잭션 연산이 끼어들 수 없다
  2. 수행중인 트랜젹션은 완료될 때까지 다른 트랜잭션에서 수행 결과를 참조할 수 없다
- Durability(영속성, 지속성)
  1. 완료된 트랜잭션의 결과는 시스템이 고정나더라도 영구적으로 반영되어야 한다



- commit
  - 한개의 논리적 단위(트랜잭션)에 대한 작업이 성공적으로 끝났고 데이터베이스가 다시 일관된 상태에 있을 때, 이 트랜잭션이 행한 갱신 연산이 완료된 것을 트랜잭션 관리자에게 알려주는 연산
- Rollback
  - 트랜잭션 처리가 비정상적으로 종료되어 DB의 일관성을 깨뜨렸을 때, 이 트랜잭션이 행한 모든 연산을 취소(Undo)하는 연산(원자성)
  - Rollback시 해당 트랜잭션을 재시작하거나 폐기한다
- 트랙잭션 상태

![img](https://t1.daumcdn.net/cfile/tistory/999C55345B6D2ED308)

- 활동(Active) : 트랜잭션이 실행중인 상태
- 실패(Failed) : 트랜잭션 실행에 오류가 발생하여 중단된 상태
- 철회(Aborted) : 트랜잭션이 비정상적으로 종료되어 Rollback연산 수행한 상태
- 부분 완료(Partially Commited) : 트랜잭션의 마지막 연산까지 실행했지만, Commit연산 실행되기 직전 상태
- 완료(Commited) : 트랜잭션이 성공적으로 종료되어 Commit연산을 실행한 후의 상태