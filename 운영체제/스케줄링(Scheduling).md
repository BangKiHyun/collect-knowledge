## 스케줄링(Scheduling)

- 스케줄링이란
  - 프로세스가 생성되어 실행될때 필요한 시스템의 여러자원을 해당 프로세스에게 할당하는 작업을 의미
  - 프로세스가 생성되어 완료될때까지 프로세스는 여러 종류의 스케줄링 과정을 거치게 된다



- 스케줄링의 목적
  - 스케줄링은 CPU나 자원을 효율적으로 사용하기 위한 정책으로  프로세스들 사이에서 우선순위를 관리하는 일
  - 작업 처리율과 CPU 이용률을 향상시키기 위해 필요한 기법
  - 비선점 스케줄링과 선점 스케줄링으로 나뉜다



- 비선점 스케줄링

  - 정의 : 어떤 프로세스가 사용중인 CPU를 다른 프로세스가 **강제로 빼앗아 사용할 수 없는** 스케줄링
  - 일괄 처리 시스템에 적합하며, 응답 시간 예측이 쉬운 장점이 있다
  - 중요한 작업(짧은 작업)이 중요하지 않은 작업(긴 작업)을 기다리는 경우가 발생할 수 있는 단점이 있다

  

  - FCFS 스케줄링(First Come First Served)
    - 준비 큐에 먼저 도착한 순서에 따라 CPU를 할당하는 스케줄링
    - 먼저 들어온 프로세스가 먼저 처리되어 공평성은 유지되나 ,중요한 작업이 중요하지 않은 작업을 기다릴 수 있다
  - SJF 스케줄링(Shortest Job First)
    - 실행 시간이 가장 짧은 프로세스에 먼저 CPU를 할당하는 스케줄링
    - 프로세스들의 평균 대기 시간이 가장 짧다
    - starving(기아 상태)가 발생할 수 있다
      해결법 : aging으로 해결
  - HRN  스케줄링(Highest Response Ration Next)
    - SJF 스케줄링의 문제점을 보완한 스케줄링
    - 실행 시간과 대기 시간을 둘 다 고려해 우선순위를 정하고, 각 프로세스의 우선순위에 따라 CPU를 할당한다
    - 우선순위 (대기 시간 + 실행 시간) / 실행 시간
  - 우선순위 스케줄링(Priority)
    - 각 프로세스마다 우선순위를 부여하고, 각 프로세스의 우선순위에 따라 CPU를 할당하는 스케줄링
    - 우선순위는 시간제한, 메모리 요구, 평균 실행 시간, 프로세스 중요도, 자원 사용량 등을 복합적으로 고려
    - starving(기아 상태)가 발생할 수 있다



- 선점 스캐줄링

  - 정의 : 어떤 프로세스가 사용 중인 CPU를 다른 프로세스가 **강제로 빼앗아 사용할 수 있는** 스케줄링
  - 시분할 시스템에 적합, 응답 시간이 빠른 장점
  - CPU를 선점할 프로세스에게 일정한 시간을 배정하기 위해 **인터럽트용 타이머 필요**
  - 비선점 스케줄링에 비해 오버헤드가 큰 단점

  

  - RR 스케줄링(Round Robin)
    - 시분할 시스템을 위해 설계된 스케줄링
    - FCFS 스케줄링과 유사, 선점이 가능하도록 시간 단위(TIme Quantum)이 추가
    - FCFS와 같이 큐에 먼저 들어온 프로세스가 CPU를 할당 받지만, Time Quantum만큼만 실행된 후 다시 준비 큐로 돌아간다
    - TIme Quantum이 커지면 FCFS 스케줄링과 같아진다
    - TIme Quantum이 작아지면 Context Switching이 자주 발생하여 오버헤드가 커진다
  - SRT 스케줄링(Shrtest Remaining Time)
    - SJF 스케줄링을 선점이 가능하도록 변형한 스케줄링
    - 실행 중인 프로세스와 남은 실행 시간과 준비 큐에 도착한 프로세스의 실행 시간을 비교하고, 그중 실행 시간이 짧은 프로세스에게 CPU를 할당하는 스케줄링
  - MLQ(Multilevel Queue)
    - 다단케 큐 스케줄링으로 프로세스를 특정 그룹으로 분류하고, 각 그룹에 따라 각기 다른 준비 큐를 이용하는 시케줄링
    - 각 준비 큐는 각기 다른 스케줄링 알고리즘을 가질 수 있으며, 큐와 큐 사이에도 스케줄링 알고리즘이 필요
  - MLFQ(Multilevel Feedback Queue)
    - 다단계 큐를 변형한 스케줄링
    - MLQ는 큐와 큐 사이를 이동할 수 없으나, MLFQ는 프로세스가 큐와 큐 사이를 이동할 수 있다
    - ex) 특정 프로세스가 CPU를 너무 많이 사용하면(실행 시간이 길면), 우선순위가 낮은 큐로 이동
      또한, 우선순위가 낮은 큐에서 너무 오래 대기하는 프로세스가 있다면, 해당 프로세스는 우선순위가 높은 큐로 이동



- 용어 설명
  - **기아 (Starvation)** : 실행 시간이 긴 프로세스가 자원을 계속 할당받지 못하는 문제
    실행 시간이 긴 프로세스가 대기하는 상황에서, 실행 시간이 짧은 프로세스가 준비 큐에 계속 들어오면, 실행 시간이 긴 프로세스는 계속 자원을 할당받지 못하는 문제가 생긴다.
  - **에이징 (Aging)** : 준비 큐에 있는 프로세스에 나이를 부여하는 방법
    특정 프로세스가 얼마나 오래 기다렸는지 고려하고, 기다린 시간이 길다면 자원을 할당해 준다.