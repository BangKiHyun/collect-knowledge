# 컨테이너

## 컨테이너란?

- **컨테이너는 보통 인스턴스의 생명주기를 관리하며, 생성된 인스턴스들에게 추가적인 기능을 제공하도록 하는 것이라 할 수 있다.**
- 다시말해, 컨테이너란 프로그래머가 작성한 코드의 처리과정을 위임받은 독립적인 존재다.
- 컨테이너는 프로그래머가 작성한 코드를 스스로 참조한 뒤 알아서 **객체의 생성과 소멸을 컨트롤해준다.**

</br >

## 스프링 컨테이너 두 종류

### 빈팩토리(BeanFactory)

- DI의 기본사항을 제공하는 가장 단순한 컨테이너
- 팩토리 디자인 패턴을 구현한 것. Bean 팩토리는 빈을 생성하고 분배하는 책임을 지는 클래스
- 빈 팩토리가 빈의 정의는 즉시 로딩하는 반면, 빈 자체가 필요하게 되기 전까지는 인스턴스화를 하지 않는다.(Lazy Loading)

</br >

### 어플리케이션 컨텍스트(ApplicationContext)

- 빈 팩토리와 유사한 기능을 제공하지만 좀 더 많은 기능을 제공하는 어플리케이션 컨텍스트
- 빈 팩토리보다 더 추가적으로 제공하는 기능
  - 국제화가 지원되는 텍스트 메시지를 관리해 준다.
  - 이미지같은 파일 지원을 로드 할 수 있는 포괄적인 방법을 제공해준다.
  - 리스너로 등록된 빈에게 이벤트 발생을 알려준다.

따라서 대부분의 애플리케이션에서 빈팩토리보다 어플리케이션 컨텍스트를 사용하는 것이 좋다.

</br >

### 빈팩토리 vs 어플리케이션 컨텍스트

- 빈 팩토리는 처음으로 getBean()이 호출된 시점에서 해당 빈을 생성
  - lazy loading
- 컨텍스트 초기화 시점에 모든 싱글톤 빈을 미리 로드한 후 애플리케이션 기동 후에는 빈을 지연 없이 얻을 수 있음
  - 미리 빈을 생성해 놓아 빈이 필요할 때 즉시 사용할 수 있도록 보장

</br >

# IoC(Inversion of Control, 제어의 역전)

## IoC란?

기존 자바 기반으로 애플리케이션을 개발할 때 자바 객체를 생성하고 서로간의 의존관계를 연결시키는 작업에 대한 제어권은 보통 개발되는 애플리케이션에 있었다.

하지만 **객체의 생성에서부터 생명주기의 관리까지 모든 객체에 대한 제어권을 IoC 컨테이너가 위임받으면서 객체의 생명주기에 관한 제어권이 역전되었다.**

다시말해, **객체에 대한 제어권이 개발자로부터 컨테이너에게 넘어가면서 객체의 생명주기 관리의 모든 것을 컨테이너가 맡아서 하게된다. 이를 일반적인 제어권의 흐름이 바뀌었다고 하여 IoC라고 한다.**

</br >

## IoC와 DI의 관계

DI는 IoC를 실현시키기 위한 방법 중 하나

- DI는 오브젝트를 생성하고 오브젝트끼리의 관계를 생성해 소프트웨어의 부품화 및 설계를 가능하게 한다.
- DI를 이용하면 인터페이스 기반의 컴포넌트를 쉽게 구현할 수 있다.
- DI를 통해 클래스에서 new 연산자가 사라짐으로써 개발자가 팩토리 메서드와 같은 디자인 패턴을 구사하지 않아도 DI 컨테이너가 건내주는 인스턴스를 인터페이스로 받아서 인터페이스 기반의 컴포넌트화를 구현할 수 있게 됐다.
  - 즉, 의존성 주입의 편리성을 도와 프로그래머는 코드에 대한 로직에 좀 더 집중할 수 있게 되었다.

